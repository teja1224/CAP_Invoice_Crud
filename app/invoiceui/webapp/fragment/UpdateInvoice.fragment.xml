<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <Dialog id="updateDialog" title="Update Invoice" draggable="true" resizable="true" contentWidth="750px" contentHeight="450px">
    <VBox class="sapUiSmallMargin">
      <Label text="Invoice Number"/>
      <Input id="updateInvoiceNumber" editable="false" value="{invoice>/invoiceNumber}"/>

      <Label text="Date" required="true"/>
      <DatePicker valueFormat="yyyy-MM-dd" id="updateDate" change="onDateChange" required="true" value="{invoice>/dateFormatted}"/>


      <Label text="Amount" required="true"/>
      <Input id="updateAmount" type="Number" required="true" editable="false" value="{invoice>/amount}"/>

      <Label text="Status" required="true"/>
      <Select id="updateStatus" width="100%" required="true" selectedKey="{invoice>/status}">
        <items>
          <core:Item key="Pending" text="Pending"/>
          <core:Item key="Paid" text="Paid"/>
        </items>
      </Select>

      <Toolbar>
        <Title text="Invoice Items"/>
        <ToolbarSpacer/>
        <Button text="Add Item" press="onAddItemRow" type="Emphasized">
          <customData>
            <core:CustomData key="dialogType" value="update"/>
          </customData>
        </Button>
      </Toolbar>

      <Table id="updateItemsTable" items="{itemsModel>/}">
        <columns>
          <Column><Text text="Name"/></Column>
          <Column><Text text="Price"/></Column>
          <Column><Text text="Quantity"/></Column>
          <Column><Text text="Total"/></Column>
          <Column><Text text="Action"/></Column>
        </columns>
        <items>
          <ColumnListItem>
            <cells>
              <Input value="{itemsModel>name}" valueState="{itemsModel>nameState}" placeholder="Name"/>
              <Input value="{itemsModel>price}" valueState="{itemsModel>priceState}" placeholder="100.00" liveChange="onItemPriceChange">
                <customData>
                  <core:CustomData key="dialogType" value="update"/>
                </customData>
              </Input>
              <Input value="{itemsModel>quantity}" valueState="{itemsModel>quantityState}" placeholder="1" liveChange="onItemQuantityChange">
                <customData>
                  <core:CustomData key="dialogType" value="update"/>
                </customData>
              </Input>
              <Text text="{itemsModel>total}" />
              <Button icon="sap-icon://delete" press="onDeleteItemRow" type="Reject">
                <customData>
                  <core:CustomData key="dialogType" value="update"/>
                </customData>
              </Button>
            </cells>
          </ColumnListItem>
        </items>
      </Table>
    </VBox>
    <beginButton>
      <Button text="Submit" press="onUpdateSubmit" type="Emphasized"/>
    </beginButton>
    <endButton>
      <Button text="Cancel" press="onUpdateCancel"/>
    </endButton>
  </Dialog>
</core:FragmentDefinition>
